{"remainingRequest":"/Users/macbook/Documents/Project/vuejs/form-cv/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macbook/Documents/Project/vuejs/form-cv/src/components/input/FileInput.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/macbook/Documents/Project/vuejs/form-cv/src/components/input/FileInput.vue","mtime":1659029722540},{"path":"/Users/macbook/Documents/Project/vuejs/form-cv/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macbook/Documents/Project/vuejs/form-cv/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macbook/Documents/Project/vuejs/form-cv/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/macbook/Documents/Project/vuejs/form-cv/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macbook/Documents/Project/vuejs/form-cv/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBWdWUgZnJvbSAndnVlJwppbXBvcnQgeyBDb21wb25lbnQsIFJlZiwgUHJvcCwgRW1pdCwgTW9kZWwsIFdhdGNoIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicKQENvbXBvbmVudCh7CiAgY29tcG9uZW50czoge30KfSkKZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsZUlucHV0IGV4dGVuZHMgVnVlIHsKICBATW9kZWwoJ2lucHV0JywgeyB0eXBlOiBOdW1iZXIgfSkgdmFsdWUhOiBudW1iZXI7CiAgQFByb3AoKSBydWxlcyE6IHN0cmluZzsKICBAUHJvcCgpIG5hbWUhOiBzdHJpbmc7CiAgQFByb3AoKSB0eXBlITogc3RyaW5nOwogIEBQcm9wKCkgc3JjITogc3RyaW5nOwogIEBQcm9wKCkgYWNjZXB0ITogc3RyaW5nOwogIEBQcm9wKCkgbWF4U2l6ZUltZ0luS2IhOiBudW1iZXI7CiAgQFByb3AoKSBtYXhTaXplVmlkZW9JbktiITogbnVtYmVyOwoKICBAUmVmKCkgZmlsZUNob29zZSE6IEhUTUxFbGVtZW50OwoKICAvLyBoZWxwZXI6IEhlbHBlck1vZGVsID0gbmV3IEhlbHBlck1vZGVsKCk7CiAgb25BY3RpdmUgPSB0cnVlOwogIG9uUHJldmlldyA9IGZhbHNlOwogIG9uUHJldmlld1ZpZGVvID0gZmFsc2U7CiAgbW9kVmFsdWU6IG51bWJlciB8IG51bGwgPSBudWxsOwogIHNyY1ByZXZpZXc6IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgbnVsbCA9ICcnOwogIGZpbGVJbWFnZTogRmlsZSB8IG51bGwgPSBudWxsOwogIGltYWdlID0gbnVsbDsKICBvbkVsZW1lbnRDbGljayAoKSB7CiAgICBpZiAodGhpcy5maWxlQ2hvb3NlKSB7CiAgICAgIHRoaXMuZmlsZUNob29zZS5jbGljaygpCiAgICB9CiAgfQoKICBvblNlbGVjdEZpbGUgKHBheWxvYWQpIHsKICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC50YXJnZXQKICAgIGNvbnN0IGZpbGVzID0gaW5wdXQuZmlsZXMKICAgIGlmIChmaWxlcyAmJiBmaWxlc1swXSkgewogICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpCiAgICAgIGlmICh0aGlzLmZpbGVNYXhJbWFnZShmaWxlc1swXS5zaXplLCB0aGlzLm1heFNpemVJbWdJbktiKSkgewogICAgICAgIHJlYWRlci5vbmxvYWQgPSAocGF5bG9hZCkgPT4gewogICAgICAgICAgaWYgKHBheWxvYWQudGFyZ2V0KSB7CiAgICAgICAgICAgIHRoaXMuc3JjUHJldmlldyA9IHBheWxvYWQudGFyZ2V0LnJlc3VsdAogICAgICAgICAgICB0aGlzLmZpbGVJbWFnZSA9IGZpbGVzWzBdCiAgICAgICAgICAgIC8vIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgIC8vICAgaWYgKHRoaXMuZmlsZUltYWdlKSB7CiAgICAgICAgICAgIC8vICAgICBhcGkuaGVscGVyCiAgICAgICAgICAgIC8vICAgICAgIC51cGxvYWRGaWxlKHRoaXMuZmlsZUltYWdlLCB0aGlzLmZpbGVJbWFnZS5uYW1lKQogICAgICAgICAgICAvLyAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLmhlbHBlciA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5tb2RWYWx1ZSA9IHRoaXMuaGVscGVyLm1lZGlhX2lkCiAgICAgICAgICAgIC8vICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSkKICAgICAgICAgICAgLy8gICAgICAgfSkKICAgICAgICAgICAgLy8gICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgLy8gICAgICAgICByZWplY3QobmV3IEVycm9yKGVycikpCiAgICAgICAgICAgIC8vICAgICAgIH0pCiAgICAgICAgICAgIC8vICAgfQogICAgICAgICAgICAvLyB9KQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlc1swXSkKICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIGZpbGVzWzBdKQogICAgICAgIHRoaXMub25QcmV2aWV3ID0gdHJ1ZQogICAgICAgIHRoaXMub25QcmV2aWV3VmlkZW8gPSBmYWxzZQogICAgICAgIHRoaXMub25BY3RpdmUgPSBmYWxzZQogICAgICB9CiAgICB9CiAgfQoKICBmaWxlTWF4SW1hZ2UgKHNpemU6IG51bWJlciwgbWF4OiBudW1iZXIpIHsKICAgIGNvbnN0IG1heEZpbGUgPSBtYXggKiAxMDAwCiAgICBpZiAoc2l6ZSA8PSBtYXhGaWxlKSB7CiAgICAgIHJldHVybiB0cnVlCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2UKICAgIH0KICB9CgogIEBXYXRjaCgnbW9kVmFsdWUnKQogIG9uQ2hhbmdlRGF0ZVBpY2tlciAoKSB7CiAgICB0aGlzLmlucHV0KHRoaXMubW9kVmFsdWUpCiAgfQoKICBARW1pdCgpCiAgaW5wdXQgKHZhbHVlOiBudW1iZXIgfCBudWxsKSB7CiAgICByZXR1cm4gdmFsdWUKICB9Cn0K"},{"version":3,"sources":["FileInput.vue"],"names":[],"mappings":";AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"FileInput.vue","sourceRoot":"src/components/input","sourcesContent":["<template>\n  <div class=\"noimg\">\n    <a href=\"javascript:;\" class=\"d-flex align-items-center\" @click=\"onElementClick()\">\n      <img\n        :src=\"require(`@/assets/img/${src}`)\"\n        alt=\"\"\n        :class=\"onActive === true ? 'd-block' : 'd-none'\"\n      />\n      <img\n        :src=\"srcPreview\"\n        alt=\"\"\n        :class=\"onPreview === true ? 'd-block' : 'd-none'\"\n      />\n      <input\n        class=\"d-none\"\n        type=\"file\"\n        :accept=\"accept\"\n        ref=\"fileChoose\"\n        @change=\"onSelectFile\"\n      />\n      <input type=\"text\" v-model=\"modValue\" @input=\"input\" class=\"d-none\" />\n      <div class=\"ml-3\">{{ !fileImage ? 'Upload Image':fileImage.name }}</div>\n    </a>\n  </div>\n</template>\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { Component, Ref, Prop, Emit, Model, Watch } from 'vue-property-decorator'\n@Component({\n  components: {}\n})\nexport default class FileInput extends Vue {\n  @Model('input', { type: Number }) value!: number;\n  @Prop() rules!: string;\n  @Prop() name!: string;\n  @Prop() type!: string;\n  @Prop() src!: string;\n  @Prop() accept!: string;\n  @Prop() maxSizeImgInKb!: number;\n  @Prop() maxSizeVideoInKb!: number;\n\n  @Ref() fileChoose!: HTMLElement;\n\n  // helper: HelperModel = new HelperModel();\n  onActive = true;\n  onPreview = false;\n  onPreviewVideo = false;\n  modValue: number | null = null;\n  srcPreview: string | ArrayBuffer | null = '';\n  fileImage: File | null = null;\n  image = null;\n  onElementClick () {\n    if (this.fileChoose) {\n      this.fileChoose.click()\n    }\n  }\n\n  onSelectFile (payload) {\n    const input = payload.target\n    const files = input.files\n    if (files && files[0]) {\n      const reader = new FileReader()\n      if (this.fileMaxImage(files[0].size, this.maxSizeImgInKb)) {\n        reader.onload = (payload) => {\n          if (payload.target) {\n            this.srcPreview = payload.target.result\n            this.fileImage = files[0]\n            // return new Promise((resolve, reject) => {\n            //   if (this.fileImage) {\n            //     api.helper\n            //       .uploadFile(this.fileImage, this.fileImage.name)\n            //       .then((response) => {\n            //         this.helper = Object.assign({}, response.data)\n            //         this.modValue = this.helper.media_id\n            //         resolve(response)\n            //       })\n            //       .catch((err) => {\n            //         reject(new Error(err))\n            //       })\n            //   }\n            // })\n          }\n        }\n        reader.readAsDataURL(files[0])\n        this.$emit('input', files[0])\n        this.onPreview = true\n        this.onPreviewVideo = false\n        this.onActive = false\n      }\n    }\n  }\n\n  fileMaxImage (size: number, max: number) {\n    const maxFile = max * 1000\n    if (size <= maxFile) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n  @Watch('modValue')\n  onChangeDatePicker () {\n    this.input(this.modValue)\n  }\n\n  @Emit()\n  input (value: number | null) {\n    return value\n  }\n}\n</script>\n"]}]}