{"remainingRequest":"/Users/macbook/Documents/Project/vuejs/form-cv/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macbook/Documents/Project/vuejs/form-cv/src/components/input/FileInput.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/macbook/Documents/Project/vuejs/form-cv/src/components/input/FileInput.vue","mtime":1659042468599},{"path":"/Users/macbook/Documents/Project/vuejs/form-cv/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macbook/Documents/Project/vuejs/form-cv/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/macbook/Documents/Project/vuejs/form-cv/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/macbook/Documents/Project/vuejs/form-cv/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/macbook/Documents/Project/vuejs/form-cv/node_modules/vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBWdWUgZnJvbSAndnVlJwppbXBvcnQgeyBDb21wb25lbnQsIFJlZiwgUHJvcCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCkBDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHt9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbGVJbnB1dCBleHRlbmRzIFZ1ZSB7CiAgLy8gQE1vZGVsKCdpbnB1dCcsIHsgdHlwZTogTnVtYmVyIH0pIHZhbHVlITogbnVtYmVyOwogIEBQcm9wKCkgcnVsZXMhOiBzdHJpbmc7CiAgQFByb3AoKSBuYW1lITogc3RyaW5nOwogIEBQcm9wKCkgdHlwZSE6IHN0cmluZzsKICBAUHJvcCgpIHNyYyE6IHN0cmluZzsKICBAUHJvcCgpIGFjY2VwdCE6IHN0cmluZzsKICBAUHJvcCgpIG1heFNpemVJbWdJbktiITogbnVtYmVyOwogIEBQcm9wKCkgbWF4U2l6ZVZpZGVvSW5LYiE6IG51bWJlcjsKCiAgQFJlZigpIGZpbGVDaG9vc2UhOiBIVE1MRWxlbWVudDsKCiAgLy8gaGVscGVyOiBIZWxwZXJNb2RlbCA9IG5ldyBIZWxwZXJNb2RlbCgpOwogIG9uQWN0aXZlID0gdHJ1ZTsKICBvblByZXZpZXcgPSBmYWxzZTsKICBvblByZXZpZXdWaWRlbyA9IGZhbHNlOwogIG1vZFZhbHVlOiBudW1iZXIgfCBudWxsID0gbnVsbDsKICBzcmNQcmV2aWV3OiBzdHJpbmcgfCBBcnJheUJ1ZmZlciB8IG51bGwgPSAnJzsKICBmaWxlSW1hZ2U6IEZpbGUgfCBudWxsID0gbnVsbDsKICBpbWFnZSA9IG51bGw7CiAgb25FbGVtZW50Q2xpY2sgKCkgewogICAgaWYgKHRoaXMuZmlsZUNob29zZSkgewogICAgICB0aGlzLmZpbGVDaG9vc2UuY2xpY2soKQogICAgfQogIH0KCiAgb25TZWxlY3RGaWxlIChwYXlsb2FkKSB7CiAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudGFyZ2V0CiAgICBjb25zdCBmaWxlcyA9IGlucHV0LmZpbGVzCiAgICBpZiAoZmlsZXMgJiYgZmlsZXNbMF0pIHsKICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKQogICAgICBpZiAodGhpcy5maWxlTWF4SW1hZ2UoZmlsZXNbMF0uc2l6ZSwgdGhpcy5tYXhTaXplSW1nSW5LYikpIHsKICAgICAgICByZWFkZXIub25sb2FkID0gKHBheWxvYWQpID0+IHsKICAgICAgICAgIGlmIChwYXlsb2FkLnRhcmdldCkgewogICAgICAgICAgICB0aGlzLnNyY1ByZXZpZXcgPSBwYXlsb2FkLnRhcmdldC5yZXN1bHQKICAgICAgICAgICAgdGhpcy5maWxlSW1hZ2UgPSBmaWxlc1swXQogICAgICAgICAgICAvLyByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICAvLyAgIGlmICh0aGlzLmZpbGVJbWFnZSkgewogICAgICAgICAgICAvLyAgICAgYXBpLmhlbHBlcgogICAgICAgICAgICAvLyAgICAgICAudXBsb2FkRmlsZSh0aGlzLmZpbGVJbWFnZSwgdGhpcy5maWxlSW1hZ2UubmFtZSkKICAgICAgICAgICAgLy8gICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5oZWxwZXIgPSBPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZS5kYXRhKQogICAgICAgICAgICAvLyAgICAgICAgIHRoaXMubW9kVmFsdWUgPSB0aGlzLmhlbHBlci5tZWRpYV9pZAogICAgICAgICAgICAvLyAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpCiAgICAgICAgICAgIC8vICAgICAgIH0pCiAgICAgICAgICAgIC8vICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgIC8vICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihlcnIpKQogICAgICAgICAgICAvLyAgICAgICB9KQogICAgICAgICAgICAvLyAgIH0KICAgICAgICAgICAgLy8gfSkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZXNbMF0pCiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBmaWxlc1swXSkKICAgICAgICB0aGlzLm9uUHJldmlldyA9IHRydWUKICAgICAgICB0aGlzLm9uUHJldmlld1ZpZGVvID0gZmFsc2UKICAgICAgICB0aGlzLm9uQWN0aXZlID0gZmFsc2UKICAgICAgfQogICAgfQogIH0KCiAgZmlsZU1heEltYWdlIChzaXplOiBudW1iZXIsIG1heDogbnVtYmVyKSB7CiAgICBjb25zdCBtYXhGaWxlID0gbWF4ICogMTAwMAogICAgaWYgKHNpemUgPD0gbWF4RmlsZSkgewogICAgICByZXR1cm4gdHJ1ZQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZhbHNlCiAgICB9CiAgfQoKICAvLyBAV2F0Y2goJ21vZFZhbHVlJykKICAvLyBvbkNoYW5nZURhdGVQaWNrZXIgKCkgewogIC8vICAgdGhpcy5pbnB1dCh0aGlzLm1vZFZhbHVlKQogIC8vIH0KCiAgLy8gQEVtaXQoKQogIC8vIGlucHV0ICh2YWx1ZTogbnVtYmVyIHwgbnVsbCkgewogIC8vICAgcmV0dXJuIHZhbHVlCiAgLy8gfQp9Cg=="},{"version":3,"sources":["FileInput.vue"],"names":[],"mappings":";AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"FileInput.vue","sourceRoot":"src/components/input","sourcesContent":["<template>\n  <div class=\"noimg\">\n    <a href=\"javascript:;\" class=\"d-flex align-items-center\" @click=\"onElementClick()\">\n      <img\n        :src=\"require(`@/assets/img/${src}`)\"\n        alt=\"\"\n        :class=\"onActive === true ? 'd-block' : 'd-none'\"\n      />\n      <img\n        :src=\"srcPreview\"\n        alt=\"\"\n        :class=\"onPreview === true ? 'd-block' : 'd-none'\"\n      />\n      <input\n        class=\"d-none\"\n        type=\"file\"\n        :accept=\"accept\"\n        ref=\"fileChoose\"\n        @change=\"onSelectFile\"\n      />\n      <!-- <input type=\"text\" v-model=\"modValue\" @input=\"input\" class=\"d-none\" /> -->\n      <div class=\"ml-3\">{{ !fileImage ? 'Upload Image':fileImage.name }}</div>\n    </a>\n  </div>\n</template>\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { Component, Ref, Prop } from 'vue-property-decorator'\n@Component({\n  components: {}\n})\nexport default class FileInput extends Vue {\n  // @Model('input', { type: Number }) value!: number;\n  @Prop() rules!: string;\n  @Prop() name!: string;\n  @Prop() type!: string;\n  @Prop() src!: string;\n  @Prop() accept!: string;\n  @Prop() maxSizeImgInKb!: number;\n  @Prop() maxSizeVideoInKb!: number;\n\n  @Ref() fileChoose!: HTMLElement;\n\n  // helper: HelperModel = new HelperModel();\n  onActive = true;\n  onPreview = false;\n  onPreviewVideo = false;\n  modValue: number | null = null;\n  srcPreview: string | ArrayBuffer | null = '';\n  fileImage: File | null = null;\n  image = null;\n  onElementClick () {\n    if (this.fileChoose) {\n      this.fileChoose.click()\n    }\n  }\n\n  onSelectFile (payload) {\n    const input = payload.target\n    const files = input.files\n    if (files && files[0]) {\n      const reader = new FileReader()\n      if (this.fileMaxImage(files[0].size, this.maxSizeImgInKb)) {\n        reader.onload = (payload) => {\n          if (payload.target) {\n            this.srcPreview = payload.target.result\n            this.fileImage = files[0]\n            // return new Promise((resolve, reject) => {\n            //   if (this.fileImage) {\n            //     api.helper\n            //       .uploadFile(this.fileImage, this.fileImage.name)\n            //       .then((response) => {\n            //         this.helper = Object.assign({}, response.data)\n            //         this.modValue = this.helper.media_id\n            //         resolve(response)\n            //       })\n            //       .catch((err) => {\n            //         reject(new Error(err))\n            //       })\n            //   }\n            // })\n          }\n        }\n        reader.readAsDataURL(files[0])\n        this.$emit('input', files[0])\n        this.onPreview = true\n        this.onPreviewVideo = false\n        this.onActive = false\n      }\n    }\n  }\n\n  fileMaxImage (size: number, max: number) {\n    const maxFile = max * 1000\n    if (size <= maxFile) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n  // @Watch('modValue')\n  // onChangeDatePicker () {\n  //   this.input(this.modValue)\n  // }\n\n  // @Emit()\n  // input (value: number | null) {\n  //   return value\n  // }\n}\n</script>\n"]}]}